<div class="container mt-5">
  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th></th>
        <th>№</th>
        <th>Полное имя</th>
        <th>Git</th>
        <th>Контакт</th>
      </tr>
    </thead>
    <tbody>
      <% @students.each_with_index do |student, index| %>
        <tr class="<%= 'table-danger' unless student.validate? %>">
          <td>
            <input type="checkbox" class="student-checkbox" data-id="<%= student.id %>">
          </td>
          <td><%= (@page - 1) * @per_page + index + 1 %></td>
          <td><%= student.get_full_name %></td>
          <td><%= student.git %></td>
          <td><%= student.get_any_contact %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="mt-3 d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
      <% if @page > 1 %>
        <%= link_to '<', students_path(page: @page - 1), class: 'btn btn-secondary' %>
      <% else %>
        <button class="btn btn-secondary disabled"><</button>
      <% end %>

      <span class="mx-3">Страница <%= @page %> из <%= @total_pages %></span>

      <% if @page < @total_pages %>
        <%= link_to '>', students_path(page: @page + 1), class: 'btn btn-secondary' %>
      <% else %>
        <button class="btn btn-secondary disabled">></button>
      <% end %>
  </div>
</div>

</div>

<script>
  document.querySelectorAll('.student-checkbox').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
      const selectAllCheckbox = document.getElementById('select-all');
      const allChecked = document.querySelectorAll('.student-checkbox:checked').length === document.querySelectorAll('.student-checkbox').length;
      selectAllCheckbox.checked = allChecked;
    });
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
